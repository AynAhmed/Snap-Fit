<h1>My Meals</h1>

<table class="mealTable">
  <thead>
    <tr>
      <th></th>
      <th>Food Name</th>
      <th>Calories</th>
      <th>Qty</th>
      <th>Unit</th>
      <th colspan="2"></th> <!-- Merge the columns for Edit and Destroy -->
    </tr>
  </thead>

  <tbody>
    <% current_date = nil %>
    <% @meals.each do |meal| %>
      <% if current_date != meal.log_date %>
        <tr class="table-row-Date">
          <td colspan="7"><%= meal.log_date %></td>
        </tr>
        <% current_date = meal.log_date %>
      <% end %>

      <tr>
        <td class="table-photo-cell" style="background-image: url('<%= meal.photo_thumb_url %>');"></td>
        <td><%= link_to meal.food_name.capitalize, meal %></td>
        <td><%= meal.nf_calories %></td>
        <td><%= meal.serving_qty %></td>
        <td><%= meal.serving_unit %></td>

        <td><%= link_to '✐', edit_meal_path(meal), class: 'edit-pen' %></td>
        <td><%= link_to "✘", meal_path(meal), data: {
          turbo_method: :delete,
          turbo_confirm: "Are you sure?"
        } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= link_to 'New Meal', new_meal_path, class: "newMealBtn" %>
